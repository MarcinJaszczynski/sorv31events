import{a as u}from"./vendor.t--hEgTQ.js";import{S as p}from"./sortable.CIoR_KH9.js";window.axios=u;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";function f(r,l,i=null){r&&p.create(r,{group:"program-points",animation:150,handle:"span",onEnd:function(o){const n=r.dataset.parentId?parseInt(r.dataset.parentId):null,t=Array.from(r.children).map(e=>e.dataset.id);l.call("updateOrder",n,t)}})}document.addEventListener("DOMContentLoaded",function(){function r(){return window.location.href.replace(/\/$/,"")+"/reorder"}function l(i){fetch(r(),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({order:i})}).then(o=>{if(!o.ok)throw new Error("Reorder failed");return o.json()}).then(()=>{window.dispatchEvent(new CustomEvent("eventProgramReordered"))}).catch(o=>{console.error(o),window.dispatchEvent(new CustomEvent("eventProgramReorderFailed",{detail:{error:o.message}}))})}document.querySelectorAll(".pp-dnd-root").forEach(function(i){i.querySelectorAll(".pp-dnd-list .pp-row");const o=i.querySelector(".pp-dnd-save");o&&o.addEventListener("click",function(){const t=Array.from(i.querySelectorAll(".pp-dnd-list .pp-row")).map((e,a)=>{const c=e.getAttribute("data-pp-id"),d=e.getAttribute("data-parent-id")||null,s=e.getAttribute("data-day")||null,m=e.getAttribute("data-order")||a;return{id:parseInt(c),parent_id:d?parseInt(d):null,day:s?parseInt(s):null,order:parseInt(m)}});window.livewire?window.livewire.emit("saveOrderFromDnDPayload",t):l(t)}),i.querySelectorAll(".pp-move-up").forEach(function(n){n.addEventListener("click",function(t){const a=t.target.closest(".pp-row")?.getAttribute("data-pp-id");window.livewire&&window.livewire.emit("callMethod","moveUp",parseInt(a))})}),i.querySelectorAll(".pp-move-down").forEach(function(n){n.addEventListener("click",function(t){const a=t.target.closest(".pp-row")?.getAttribute("data-pp-id");window.livewire&&window.livewire.emit("callMethod","moveDown",parseInt(a))})})})});(function(){function r(n){n==="dark"?document.documentElement.setAttribute("data-theme","dark"):n==="light"&&document.documentElement.setAttribute("data-theme","light")}const l=localStorage.getItem("sor3-theme");if(l)r(l);else{const n=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;r(n?"dark":"light")}window.sor3Theme={set:function(n){localStorage.setItem("sor3-theme",n),r(n)},clear:function(){localStorage.removeItem("sor3-theme"),r("light")}};function i(){const n=["[data-theme-toggle]",'[aria-label*="theme" i]','[aria-label*="Tryb" i]',".theme-toggle",".toggle-theme",".filament-theme-toggle"];let t=null;for(const e of n){const a=document.querySelector(e);if(a){t=a;break}}t&&t.addEventListener("click",function(e){const c=(document.documentElement.hasAttribute("data-theme")?"dark":"light")==="dark"?"light":"dark";window.sor3Theme.set(c)})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",i):i();function o(){const n=[".filament-header",".filament-topbar",".filament-navbar",".filament-app-header",".filament-main-header","header"];let t=null;for(const c of n){const d=document.querySelector(c);if(d){t=d;break}}if(!t||t.querySelector("[data-theme-toggle]"))return;const e=document.createElement("button");e.setAttribute("type","button"),e.setAttribute("aria-label","PrzeÅ‚Ä…cz motyw"),e.setAttribute("data-theme-toggle",""),e.className="filament-button filament-button-size-sm",e.style.marginLeft="0.5rem",e.innerHTML="ðŸŒ“",e.addEventListener("click",function(){const d=(document.documentElement.hasAttribute("data-theme")?"dark":"light")==="dark"?"light":"dark";window.sor3Theme.set(d)});const a=t.querySelector(".filament-header-actions")||t.querySelector(".filament-topbar-actions");a?a.appendChild(e):t.appendChild(e)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",o):o()})();window.initProgramPointTreeDnD=f;
